#set document(
  title: "ZELDHASH 프로토콜",
  author: "Ouziel Slama"
)
#set page(
  paper: "a4",
  margin: (x: 2.5cm, y: 2.5cm),
  numbering: "1",
)
#set par(justify: true, leading: 0.65em)
#set heading(numbering: "1.1")
#show heading: it => [
  #it
  #v(0.8em)
]

#align(center)[
  #text(size: 24pt, weight: "bold")[ZELDHASH 프로토콜]
]
#align(center)[
  #text(size: 14pt)[*비트코인의 가장 희귀한 거래를 사냥하고 ZELD를 획득하세요.*]
]
#align(center)[
  #text(size: 12pt)[저자: Ouziel Slama]
]

#v(2em)

= 동기

- 사냥의 스릴을 위해. 모든 거래는 희귀한 것을 발견할 기회가 됩니다 — 블록체인에서 눈에 보이는 곳에 숨겨진 디지털 보물입니다.

- 이러한 선행 제로 패턴은 단순히 희귀할 뿐만 아니라 — 압축을 향상시켜 잠재적으로 블록체인 저장 및 처리 효율성을 간소화할 수 있습니다.

- 누구나 희귀한 거래를 사냥하여 ZELD를 획득할 수 있습니다 — 비트코인 블록 채굴처럼 블록당 단일 승자가 없습니다. 사냥은 모두에게 열려 있습니다.

- 성공하면 ZELD 토큰은 결국 거래 수수료를 환급할 수 있습니다 — 가장 희귀한 발견을 하는 사냥꾼에게 보상합니다!

= ZELD 채굴

ZELD를 채굴하려면 txid가 최소 6개의 0으로 시작하는 비트코인 거래를 브로드캐스트해야 합니다. 보상은 귀하의 거래가 블록에서 가장 좋은 거래와 어떻게 비교되는지에 따라 계산됩니다:

- 주어진 블록에서 가장 많은 0으로 시작하는 거래는 4096 ZELD를 획득합니다

- 최고의 거래보다 0이 하나 적은 거래는 4096/16 또는 256 ZELD를 획득합니다

- 0이 두 개 적은 거래는 4096 / 16 / 16 또는 16 ZELD를 획득합니다

- 등등.

따라서 사용되는 공식은 다음과 같습니다:

#align(center)[
  ```
  reward = 4096 / 16 ^ (max_zero_count - zero_count)
  ```
]

여기서 `max_zero_count`는 최고의 거래를 시작하는 0의 개수와 같고 `zero_count`는 보상을 계산하는 거래를 시작하는 0의 개수입니다.

*참고:* 코인베이스 거래는 ZELD 보상 대상이 아닙니다.

= ZELD 배분

6개 이상의 0으로 시작하는 거래로 획득한 ZELD는 UTXO에 배분됩니다. 배분은 다음과 같이 수행됩니다:

- 단일 비-OP_RETURN UTXO가 있는 경우 전체 보상을 받습니다.

- 두 개 이상의 비-OP_RETURN UTXO가 있는 경우 보상은 마지막 것을 제외한 모든 UTXO에 각 UTXO의 가치에 비례하여 배분됩니다

- 계산이 정수만으로 이루어지므로 나눗셈의 가능한 나머지는 첫 번째 비-OP_RETURN UTXO에 배분됩니다.

예를 들어, 256 ZELD를 획득한 거래에 각각 500, 500, 500, 2000 사토시가 있는 4개의 출력이 포함된 경우 첫 번째 출력은 보상의 86 ZELD를 받고 두 번째와 세 번째는 85 ZELD를 받습니다.

= ZELD 이동

첨부된 ZELD가 있는 UTXO가 사용되면 ZELD는 거래의 새 UTXO에 배분됩니다. ZELD를 이동할 때 배분하는 두 가지 방법이 있습니다:

== 방법 1: 자동 비례 배분

기본적으로 배분은 보상과 정확히 같은 방식으로 수행됩니다 — 출력 UTXO의 비트코인 가치에 따라 비례적으로, 여러 출력이 있는 경우 마지막 출력을 제외합니다.

== 방법 2: OP_RETURN을 통한 맞춤 배분

맞춤 배분 데이터가 포함된 OP_RETURN 출력을 거래에 포함하여 ZELD가 어떻게 배분되어야 하는지 정확하게 지정할 수 있습니다. 이를 통해 ZELD 전송을 정밀하게 제어할 수 있습니다.

=== OP_RETURN 형식:

- OP_RETURN 스크립트는 4바이트 접두사 "ZELD"로 시작하는 데이터를 포함해야 합니다

- 접두사 다음에 데이터는 CBOR 형식으로 인코딩되어야 합니다

- CBOR 데이터는 부호 없는 64비트 정수 벡터(Vec<u64>)를 나타내야 합니다

- 각 정수는 해당 출력 UTXO로 보낼 ZELD 수를 지정합니다

=== 배분 규칙:

- 배분 배열의 값 수는 비-OP_RETURN 출력 수와 일치하도록 자동으로 조정됩니다

- 배열이 너무 길면 추가 값이 제거됩니다

- 배열이 너무 짧으면 0이 추가됩니다

- 배분 값의 총합은 사용 중인 총 ZELD를 초과할 수 없습니다

- 합계가 총계보다 작으면 차액이 첫 번째 출력에 추가됩니다

- 합계가 총계를 초과하면 거래는 비례 배분으로 되돌아갑니다

- 새로 채굴된 ZELD 보상은 항상 비례적으로 배분된 다음 맞춤 배분과 결합됩니다

=== 예시:

3개의 출력에 1000 ZELD를 배분하고 첫 번째에 600, 두 번째에 300, 세 번째에 100을 보내려면 OP_RETURN에 "ZELD" 다음에 [600, 300, 100]의 CBOR 인코딩이 포함됩니다.

*참고:*
- 유효한 OP_RETURN 배분이 발견되지 않으면 거래는 자동으로 비례 배분 방법을 사용합니다.
- 거래에 OP_RETURN 출력이 하나만 포함된 경우 거래 입력에 첨부된 모든 ZELD #strong[및 새로 획득한 보상]은 받을 수 있는 지출 가능한 출력이 없기 때문에 영구적으로 소각됩니다.
- 여러 OP_RETURN 출력이 있는 경우 거래에서 마지막으로 나타나고 유효한 `ZELD`+CBOR 페이로드를 전달하는 출력만 배분에 고려됩니다.

