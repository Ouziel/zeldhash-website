#set document(
  title: "פרוטוקול ZELDHASH",
  author: "Ouziel Slama"
)
#set page(
  paper: "a4",
  margin: (x: 2.5cm, y: 2.5cm),
  numbering: "1",
)
#set par(justify: true, leading: 0.65em)
#set heading(numbering: "1.1")
#show heading: it => [
  #it
  #v(0.8em)
]

#align(center)[
  #text(size: 24pt, weight: "bold")[פרוטוקול ZELDHASH]
]
#align(center)[
  #text(size: 14pt)[*צודו את העסקאות הנדירות ביותר של ביטקוין והרוויחו ZELD.*]
]
#align(center)[
  #text(size: 12pt)[מאת Ouziel Slama]
]

#v(2em)

= מניעים

- בשביל הריגוש של הציד. כל עסקה הופכת להזדמנות לגלות משהו נדיר — אוצר דיגיטלי מוסתר לעין על הבלוקצ'יין.

- הדפוסים האלה של אפסים מובילים אינם רק נדירים — הם גם יכולים לשפר דחיסה, מה שעלול לייעל את אחסון הבלוקצ'יין ויעילות העיבוד.

- כל אחד יכול להרוויח ZELD על ידי ציד עסקאות נדירות — אין מנצח יחיד לכל בלוק כמו בכריית בלוקים של ביטקוין. הציד פתוח לכולם.

- אם יצליח, טוקני ZELD יוכלו בסופו של דבר להחזיר עמלות עסקה — לתגמל ציידים שמגלים את הממצאים הנדירים ביותר!

= כריית ZELD

כדי לכרות ZELD עליכם לשדר עסקת ביטקוין שה-txid שלה מתחיל בלפחות 6 אפסים. הפרס מחושב על סמך איך העסקה שלכם משתווה לעסקה הטובה ביותר בבלוק:

- בבלוק נתון, עסקאות שמתחילות עם הכי הרבה אפסים מרוויחות 4096 ZELD

- עסקאות עם אפס אחד פחות מהעסקאות הטובות ביותר מרוויחות 4096/16 או 256 ZELD

- עסקאות עם שני אפסים פחות מרוויחות 4096 / 16 / 16 או 16 ZELD

- וכו'.

לכן הנוסחה המשמשת היא כדלקמן:

#align(center)[
  ```
  reward = 4096 / 16 ^ (max_zero_count - zero_count)
  ```
]

כאשר `max_zero_count` שווה למספר האפסים שמתחילים את העסקה הטובה ביותר ו-`zero_count` הוא מספר האפסים שמתחילים את העסקה שעבורה אנו מחשבים את הפרס.

*הערה:* עסקאות Coinbase אינן זכאיות לפרסי ZELD.

= חלוקת ZELD

ZELDs שהורווחו עם עסקה שמתחילה ב-6 אפסים או יותר מחולקים ל-UTXOs. החלוקה מתבצעת כדלקמן:

- אם יש UTXO יחיד שאינו OP_RETURN, הוא מקבל את כל הפרס.

- אם יש שניים או יותר UTXOs שאינם OP_RETURN, הפרס מחולק לכל ה-UTXOs, למעט האחרון, ביחס לערך של כל UTXO

- מכיוון שהחישובים נעשים רק עם מספרים שלמים, השארית האפשרית של החילוק מחולקת ל-UTXO הראשון שאינו OP_RETURN.

לדוגמה, אם עסקה שמרוויחה 256 ZELD מכילה 4 פלטים עם 500, 500, 500 ו-2000 סאטושי בהתאמה, הפלט הראשון מקבל 86 ZELD מהפרס, השני והשלישי 85 ZELD.

= העברת ZELD

כאשר UTXOs עם ZELDs מצורפים מוצאים, ה-ZELDs מחולקים ל-UTXOs החדשים בעסקה. יש שתי שיטות לחלוקת ZELDs בעת העברתם:

== שיטה 1: חלוקה יחסית אוטומטית

כברירת מחדל, החלוקה נעשית בדיוק באותו אופן כמו הפרסים — יחסית על בסיס ערכי הביטקוין של UTXOs הפלט, למעט הפלט האחרון אם יש מספר פלטים.

== שיטה 2: חלוקה מותאמת אישית דרך OP_RETURN

אתם יכולים לציין בדיוק איך ZELDs צריכים להיות מחולקים על ידי הכללת פלט OP_RETURN בעסקה שלכם עם נתוני חלוקה מותאמים אישית. זה מאפשר שליטה מדויקת על העברות ZELD.

=== פורמט OP_RETURN:

- סקריפט OP_RETURN חייב להכיל נתונים שמתחילים עם הקידומת של 4 בתים "ZELD"

- אחרי הקידומת, הנתונים חייבים להיות מקודדים בפורמט CBOR

- נתוני CBOR צריכים לייצג וקטור של מספרים שלמים לא חתומים של 64 ביט (Vec<u64>)

- כל מספר שלם מציין כמה ZELDs לשלוח ל-UTXO הפלט המתאים

=== כללי חלוקה:

- מספר הערכים במערך החלוקה מותאם אוטומטית כדי להתאים למספר הפלטים שאינם OP_RETURN

- אם המערך ארוך מדי, ערכים נוספים מוסרים

- אם המערך קצר מדי, אפסים מתווספים

- הסכום הכולל של ערכי החלוקה לא יכול לעלות על סך ה-ZELDs המוצאים

- אם הסכום קטן מהסך הכולל, ההפרש מתווסף לפלט הראשון

- אם הסכום עולה על הסך הכולל, העסקה חוזרת לחלוקה יחסית

- פרסי ZELD שנכרו לאחרונה מחולקים תמיד יחסית ואז משולבים עם החלוקה המותאמת אישית

=== דוגמה:

אם יש לכם 1000 ZELD לחלק ל-3 פלטים ואתם רוצים לשלוח 600 לראשון, 300 לשני, ו-100 לשלישי, ה-OP_RETURN שלכם יכיל "ZELD" ואחריו קידוד CBOR של [600, 300, 100].

*הערות:*
- אם לא נמצאת חלוקת OP_RETURN חוקית, העסקה משתמשת אוטומטית בשיטת החלוקה היחסית.
- אם עסקה מכילה רק פלט OP_RETURN אחד, כל ZELD מצורף לקלטי העסקה #strong[וכל פרס שהורווח לאחרונה] נשרפים לצמיתות כי אין פלטים שניתן להוציא כדי לקבל אותם.
- כאשר קיימים מספר פלטי OP_RETURN, רק זה שמופיע אחרון בעסקה ונושא מטען `ZELD`+CBOR חוקי נלקח בחשבון לחלוקה.

